HotCRP: Conference Review Package 2
===================================

New version by Eddie Kohler, UCLA
CRP originally by Dirk Grunwald, University of Colorado

Prerequisites
-------------
HotCRP requires the following software.  Tested versions are in parentheses.

* Apache			http://apache.org/
  (You may be able to use another web server that works with PHP.)
* PHP version 5 or higher	http://php.net/
  - Including support for MySQL, GD, and PEAR
* MySQL version 5 or higher	http://mysql.org/
* Several PHP PEAR packages:	http://pear.php.net/
  - Mail (1.1.14)		http://pear.php.net/package/Mail
  - Mail_Mime (1.4.0)		http://pear.php.net/package/Mail_Mime

The Mail and Mail_Mime PEAR packages are currently distributed as part of
the HotCRP tarball.  You may need to install additional packages to enable
PHP's MySQL, PEAR, and mail support.  On Fedora, the "php-mysql",
"php-pear", and "php-gd" packages are required.  On Debian, you will need
"php5-common", "php5-gd", "php5-mysql", and "libapache[2]-mod-php5".  On
Ubuntu, you may additionally need to install the "postfix" package for SMTP
support.

Configuration
-------------
* Database configuration

  - Decide on a name for your database (no spaces allowed).

  - Run "sudo Code/createdb.sh" to create the database.

  - Edit 'my.cnf' (typical location: '/etc/my.cnf') to ensure that MySQL
    can handle large objects.  It should contain something like this:

	[mysqld]
	max_allowed_packet=32M

    If you are accepting very large papers, make max_allowed_packet even
    larger.  Some deployments, such as Macintoshes, may not have a 'my.cnf'
    by default; just create one.  If you need to edit my.cnf, you must
    restart the mysqld server; on Linux boxes "sudo /etc/init.d/mysqld
    restart" often suffices.

* Site configuration

  - Edit "Code/options.inc", which is annotated to guide you.

  - Redirect Apache so your server URL will point at the HotCRP directory.
    (If you get an Error 500, see "Configuration notes".)  This will
    generally require adding a <Directory> for the HotCRP directory, and an
    Alias redirecting a particular URL to that directory.  For example,
    this section of httpd.conf makes the "/testconf" URL point at a HotCRP
    installation in /home/kohler/testconf-crp.

	<Directory "/home/kohler/testconf-crp">
	        Options Indexes Includes FollowSymLinks MultiViews
	        AllowOverride all
	        Order allow,deny
	        Allow from all
	</Directory>
	Alias /testconf /home/kohler/hotnets-crp

    Note that the first argument to Alias should NOT end in a slash.

  - Update the systemwide setting for PHP's 'session.gc_maxlifetime'
    configuration variable.  This provides an upper bound on HotCRP session
    lifetimes (the amount of idle time before a user is logged out
    automatically).  On Unix machines, systemwide PHP settings are often
    stored in '/etc/php.ini'.  The suggested value for this setting is
    86400, e.g., 24 hours:

	session.gc_maxlifetime = 86400

    If you want sessions to expire sooner, we recommend you set
    'session.gc_maxlifetime' to 86400 anyway, then edit Code/options.inc to
    set '$Opt["sessionLifetime"]' to the correct session timeout.

  - Sign in to the site to create an account.  The first account created
    automatically receives PC chair privilege.

    If your server configuration doesn't allow .htaccess files to set
    options, Apache will report an "Error 500" when you try to load HotCRP.
    Change your Apache configuration to "AllowOverride All" in the HotCRP
    directory, as our example does above.

    If your server shows you a directory listing rather than the HotCRP
    homepage, add the following line to the <Directory>:

	        DirectoryIndex index.html index.php

  - You can set up everything else through the web site itself.

* Configuration notes

  - HotCRP users upload papers and reviews to the HotCRP web server.  Several 
    PHP configuration variables affect the maximum attachment size the server
    will accept.  These variables are set in the base directory's ".htaccess"
    to 20 megabytes; you may want to lower them.

  - HotCRP PHP scripts can take a lot of memory, particularly if they're
    doing things like generating MIME-encoded mail messages.  By default
    HotCRP sets the PHP memory limit to 128MB.


Backing up the database
-----------------------
Run 'Code/backupdb.sh' at the shell prompt to back up the database.  This will
write the database's current structure and comments to the standard output.


License
-------
HotCRP is available under the Click license, a BSD-like license. See the 
LICENSE file for full license terms.
